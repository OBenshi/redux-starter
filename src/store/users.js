//§=================================================================================
//§
//€  ##   ##   ####  #####  #####     ####         ####  ##      ##   ####  #####
//€  ##   ##  ##     ##     ##  ##   ##           ##     ##      ##  ##     ##
//€  ##   ##   ###   #####  #####     ###          ###   ##      ##  ##     #####
//€  ##   ##     ##  ##     ##  ##      ##           ##  ##      ##  ##     ##
//€   #####   ####   #####  ##   ##  ####         ####   ######  ##   ####  #####
//§
//§=================================================================================

//€ -------------------------------------------------------------------------- */
//§                               SECTION IMPORTS                              */
//€ -------------------------------------------------------------------------- */

import { createSlice } from '@reduxjs/toolkit';
import { findIndexById } from '../helper/helpFuncs';

//§ -------------------------- END !SECTION IMPORTS -------------------------- */

//§ --------------------------- END !SECTION IMPORTS ----------------------- */

//! init id for bugs don't touch
let lastId = 0;

//€ -------------------------------------------------------------------------- */
//§                          SECTION CREATE SLICE                              */
//€ -------------------------------------------------------------------------- */

const slice = createSlice({
  name: 'users',
  initialState: [],
  //€ -------------------------------------------------------------------------- */
  //§                              SECTION REDUCERS                              */
  //€ -------------------------------------------------------------------------- */
  reducers: {
    //° ─────────────────────────────────────────────────────────── STUB: ADD USER ─────
    addUser: (users, action) => {
      users.push({
        id: ++lastId,
        name: action.payload.name,
        projects: [],
        bugs: [],
      });
    },
    addBugToUser: (users, action) => {
      const user = users.find((u) => u.id === action.payload.userId);
      user.bugs.push(action.payload.bugId);
    },
  },
});

//§ ------------------------ END !SECTION CREATE SLICE ----------------------- */

//€ -------------------------------------------------------------------------- */
//§                                 SECTION EXPORTS                            */
//€ -------------------------------------------------------------------------- */

export default slice.reducer;
export const { addUser, addBugToUser } = slice.actions;

//§ -------------------------- END !SECTION EXPORTS -------------------------- */
