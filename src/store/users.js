//§=================================================================================
//§
//€  ##   ##   ####  #####  #####     ####         ####  ##      ##   ####  #####
//€  ##   ##  ##     ##     ##  ##   ##           ##     ##      ##  ##     ##
//€  ##   ##   ###   #####  #####     ###          ###   ##      ##  ##     #####
//€  ##   ##     ##  ##     ##  ##      ##           ##  ##      ##  ##     ##
//€   #####   ####   #####  ##   ##  ####         ####   ######  ##   ####  #####
//§
//§=================================================================================

//€ -------------------------------------------------------------------------- */
//§                               SECTION IMPORTS                              */
//€ -------------------------------------------------------------------------- */

import { createSlice } from '@reduxjs/toolkit';
import { findIndexById } from '../helper/helpFuncs';

//§ -------------------------- END !SECTION IMPORTS -------------------------- */

//§ --------------------------- END !SECTION IMPORTS ----------------------- */

//! init id for bugs don't touch
let lastId = 0;

//€ -------------------------------------------------------------------------- */
//§                          SECTION CREATE SLICE                              */
//€ -------------------------------------------------------------------------- */

const slice = createSlice({
  name: 'users',
  initialState: [],
  //€ -------------------------------------------------------------------------- */
  //§                              SECTION REDUCERS                              */
  //€ -------------------------------------------------------------------------- */
  reducers: {
    //° ─────────────────────────────────────────────────────────── STUB: ADD USER ─────
    userAdded: (users, action) => {
      users.push({
        id: ++lastId,
        name: action.payload.name,
        projects: [],
        bugs: [],
      });
    },
    // bugAssignedToUser: (users, action) => {
    //   const user = users.find((u) => u.id === action.payload.userId);
    //   user.bugs.push(action.payload.bugId);
    // },
    //§ ------------------------ END !SECTION REDUCERS -------------------- */
  },
});

//§ ------------------------ END !SECTION CREATE SLICE ----------------------- */

//€ -------------------------------------------------------------------------- */
//§                          SECTION ACTION CREATORS                          */
//€ -------------------------------------------------------------------------- */

//° ─────────────────────────────────────────────────── STUB: ADD USER ──────────
export const addUser = (userId) => (bugId) => {
  apiCallBegan({
    url: 'bugs/' + id,
    method: 'PATCH',
    reqBody: { resolved: true },
    onSuccess: bugResolved.type,
  });
};

//§ ------------------------ END !SECTION ACTION CREATORS -------------------- */

//€ -------------------------------------------------------------------------- */
//§                                 SECTION EXPORTS                            */
//€ -------------------------------------------------------------------------- */

export default slice.reducer;
export const { userAdded } = slice.actions;

//§ -------------------------- END !SECTION EXPORTS -------------------------- */
